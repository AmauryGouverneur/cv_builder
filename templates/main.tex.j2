\documentclass[a4paper,11pt]{article}

\usepackage{latexsym}
\usepackage[empty]{fullpage}
\usepackage{titlesec}
\usepackage[usenames,dvipsnames]{color}
\usepackage{enumitem}
\usepackage[hidelinks]{hyperref}
\usepackage{fancyhdr}
\usepackage[english]{babel}
\usepackage{tabularx}
\usepackage{fontawesome5}
\usepackage{multicol}
\usepackage{geometry}
\usepackage{csquotes}
\usepackage{iftex}

\geometry{a4paper, margin=0.95in, bottom=0.4in}
\setlength{\footskip}{8pt}
\setlength{\multicolsep}{-3.0pt}
\setlength{\columnsep}{-1pt}

\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}

\urlstyle{same}
\raggedbottom
\raggedright
\setlength{\tabcolsep}{0in}

\titleformat{\section}{
  \vspace{-4pt}\scshape\raggedright\large
}{}{0em}{}[\color{black}\titlerule \vspace{-5pt}]

\ifPDFTeX
  \input{glyphtounicode}
  \pdfgentounicode=1
\fi

\newcommand{\resumeItem}[1]{\item\small{#1\vspace{-2pt}}}
\newcommand{\resumeItemListStart}{\begin{itemize}[leftmargin=*, itemsep=2pt]}
\newcommand{\resumeItemListEnd}{\end{itemize}\vspace{-5pt}}
\renewcommand\labelitemi{$\vcenter{\hbox{\tiny$\bullet$}}$}

\newcommand{\EntryListStart}{\begin{itemize}[leftmargin=0in, label={}, itemsep=6pt]}
\newcommand{\EntryListEnd}{\end{itemize}}

% Full education entry (supports 2 optional info lines)
\newcommand{\EducationEntry}[7]{%
  \vspace{-2pt}\item
  \begin{tabular*}{1.0\textwidth}[t]{l@{\extracolsep{\fill}}r}
    \textbf{#1}, {#2} & \textit{\small #3} \\
  \end{tabular*}\vspace{-2pt}
  \begin{tabular*}{1.0\textwidth}[t]{@{}l@{}}
    \textsc{#4} \\
    {\small #5}%
    \ifx\relax#6\relax\else\\{\small #6}\fi
    \ifx\relax#7\relax\else\\\textit{#7}\fi
  \end{tabular*}
  \vspace{-7pt}
}

% Compact education entry (only one optional info line)
\newcommand{\EducationEntrySmall}[5]{%
  \vspace{-2pt}\item
  \begin{tabular*}{1.0\textwidth}[t]{l@{\extracolsep{\fill}}r}
    \textbf{#1}, {#2} & \textit{\small #3} \\
  \end{tabular*}\vspace{-2pt}
  \begin{tabular*}{1.0\textwidth}[t]{@{}l@{}}
    \textsc{#4} \\
    {\small #5}
  \end{tabular*}
  \vspace{-7pt}
}

% Work experience entry
\newcommand{\RoleEntry}[5]{%
  \vspace{-2pt}\item
  \begin{tabular*}{1.0\textwidth}[t]{l@{\extracolsep{\fill}}r}
    \textbf{#1}, #2, #3 & \textit{\small #4} \\
  \end{tabular*}\vspace{-7pt}
  #5
}

% Teaching entry (4 args, no bold)
\newcommand{\TeachingEntry}[4]{%
  \vspace{-2pt}\item
  \begin{tabular*}{1.0\textwidth}[t]{l@{\extracolsep{\fill}}r}
    #1, #2, #3 & \textit{\small #4} \\
  \end{tabular*}\vspace{-7pt}
}

\begin{document}

% ---------- Header ----------
\begin{center}
  {\Huge \scshape {{ first_name|latex }}\ {{ last_name|latex }}} \\ \vspace{10pt}
  \small
  {% if website_url and website_text %}
    \href{ {{ website_url|latex }} }{\raisebox{-0.1\height}\faHome~{{ website_text|latex }}} ~
  {% endif %}
  {% if email %}
    \href{mailto:{{ email|latex }}}{\raisebox{-0.2\height}{\faIcon[regular]{envelope}}~{{ email|latex }}} ~
  {% endif %}
  {% if phone %}
    \href{tel:{{ phone|latex }}}{\faIcon{mobile}~{{ phone|latex }}} ~
  {% endif %}
  {% if linkedin_url %}
    \href{ {{ linkedin_url|latex }} }{\raisebox{-0.2\height}\faLinkedinIn} ~
  {% endif %}
  {% if scholar_url %}
    \href{ {{ scholar_url|latex }} }{\raisebox{-0.2\height}\faGraduationCap}
  {% endif %}
\end{center}

{% if profile_text %}
\section{Profile}
{{ profile_text|latex }}
{% endif %}

{% if research_expertise %}
\section{Research Expertise}
{{ research_expertise|latex }}
{% endif %}

{% if education and education|length > 0 %}
\section{Education}
\EntryListStart
{% for edu in education %}
  {% if edu.get("variant","full") == "small" %}
    \EducationEntrySmall
      { {{ edu.institution|latex }} }{ {{ edu.city|latex }}{% if edu.country %}, {{ edu.country|latex }}{% endif %} }
      { {{ edu.start|latex }} -- {{ edu.end|latex }} }
      { {{ edu.degree|latex }} }
      { {{ edu.info1|default("")|latex }} }
  {% else %}
    \EducationEntry
      { {{ edu.institution|latex }} }{ {{ edu.city|latex }}{% if edu.country %}, {{ edu.country|latex }}{% endif %} }
      { {{ edu.start|latex }} -- {{ edu.end|latex }} }
      { {{ edu.degree|latex }} }
      { {{ edu.info1|default("")|latex }} }
      { {{ edu.info2|default("")|latex }} }
      { {{ edu.info3|default("")|latex }} }
  {% endif %}
{% endfor %}
\EntryListEnd
{% endif %}

{% if work and work|length > 0 %}
\section{Work Experience}
\EntryListStart
{% for job in work %}
  \RoleEntry
    { {{ job.role|latex }} }{ {{ job.company|latex }} }{ {{ job.city|latex }}{% if job.country %}, {{ job.country|latex }}{% endif %} }
    { {{ job.start|latex }} -- {{ job.end|latex }} }
    {%
      {% if job.bullets and job.bullets|length > 0 %}
      \resumeItemListStart
      {% for b in job.bullets %}
        \resumeItem{ {{ b|latex }} }
      {% endfor %}
      \resumeItemListEnd
      {% else %}
      {}
      {% endif %}
    }
{% endfor %}
\EntryListEnd
{% endif %}

{% if selected_project %}
\section{Selected Project}
{{ selected_project|latex }}
{% endif %}

{% if skills_languages or skills_libraries or skills_tools %}
\section{Programming skills}
{% if skills_languages %}\textsc{Languages}: {{ skills_languages|latex }}\\{% endif %}
{% if skills_libraries %}\textsc{Libraries}: {{ skills_libraries|latex }}\\{% endif %}
{% if skills_tools %}\textsc{Tools \& Environment}: {{ skills_tools|latex }}{% endif %}
{% endif %}

{% if spoken_languages %}
\section{Languages}
{{ spoken_languages|latex }}
{% endif %}

{% if other_interests %}
\section{Other Interests}
{{ other_interests|latex }}
{% endif %}

\end{document}
